<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>
    <!-- <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script> -->
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>
    <script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>
    <title>物业服务</title>
    <div id="common-style"></div>
  </head>
  <body class="app">
    <!-- @TOC -->
    <!-- =================================================== -->
    <!--
      + @Page Loader
      + @App Content
          - #Left Sidebar
              > $Sidebar Header
              > $Sidebar Menu

          - #Main
              > $Topbar
              > $App Screen Content
    -->

    <!-- @Page Loader -->
    <!-- =================================================== -->
    <div id='loader'>
      <div class="spinner"></div>
    </div>

    <script>
      window.addEventListener('load', function load() {
        const loader = document.getElementById('loader');
        setTimeout(function() {
          loader.classList.add('fadeOut');
        }, 300);
      });
    </script>

    <!-- @App Content -->
    <!-- =================================================== -->
    <div>
      <!-- #Left Sidebar ==================== -->
      <div id="common-sidebar"></div>
      <!-- #Main ============================ -->
      <div class="page-container">
        <!-- ### $Topbar ### -->
        <div id="common-topbar"></div>

        <!-- ### $App Screen Content ### -->
        <main class='main-content bgc-grey-100 scrollable pos-r bdT layer'>
            <div class="row gap-20 masonry pos-r">
              <!-- 第1個item元件的寛度將定義所有元件初始寛度 -->
              <div class="masonry-sizer col-md-6"></div>

              <div class="masonry-item col-md-12">
                  <!-- #Monthly Stats ==================== -->
                  <div class="bd bgc-white">
                    <div class="layers">
                      <div class="layer w-100 pX-20 pT-20">
                        <h6 class="lh-1">各地块物业服务情况</h6>
                      </div>
                      <div class="layer w-100 p-20">
                          <!-- <canvas id='mainContent' height="400" width="500"></canvas> -->
                          <div id='mainContent' style="width: 80%; height: 600%"></div>
                      </div>
                    </div>
                  </div>
              </div>
              
              <div class="masonry-item col-md-4">
                  <div class="bd bgc-white">
                      <div class="layers">
                          <div class="layer w-100 p-20">
                          </div>
                      </div>
                  </div>
                <!-- <div class="full-container">
                  <div class="property-app">
                  </div>
                </div> -->
              </div>
            </div>
        </main>

        <!-- ### $App Screen Footer ### -->
        <footer class="bdT ta-c p-30 lh-0 fsz-sm c-grey-600">
        </footer>
      </div>
    </div>
  </body>
</html>


<script type="text/javascript">
  var dom = document.getElementById("mainContent");
  //var dom = document.getElementsByClassName("property-app");
  var myChart = echarts.init(dom);
  var app = {};
  option = null;
  
  var yearCount = 7;
  var categoryCount = 30;
  
  var xAxisData = [];
  var customData = [];
  var legendData = [];
  var dataList = [];
  
  legendData.push('trend');
  var encodeY = [];
  for (var i = 0; i < yearCount; i++) {
      legendData.push((2010 + i) + '');
      dataList.push([]);
      encodeY.push(1 + i);
  }
  
  for (var i = 0; i < categoryCount; i++) {
      var val = Math.random() * 1000;
      xAxisData.push('category' + i);
      var customVal = [i];
      customData.push(customVal);
  
      var data = dataList[0];
      for (var j = 0; j < dataList.length; j++) {
          var value = j === 0
              ? echarts.number.round(val, 2)
              : echarts.number.round(Math.max(0, dataList[j - 1][i] + (Math.random() - 0.5) * 200), 2);
          dataList[j].push(value);
          customVal.push(value);
      }
  }
  
  function renderItem(params, api) {
      var xValue = api.value(0);
      var currentSeriesIndices = api.currentSeriesIndices();
      var barLayout = api.barLayout({
          barGap: '30%', barCategoryGap: '20%', count: currentSeriesIndices.length - 1
      });
  
      var points = [];
      for (var i = 0; i < currentSeriesIndices.length; i++) {
          var seriesIndex = currentSeriesIndices[i];
          if (seriesIndex !== params.seriesIndex) {
              var point = api.coord([xValue, api.value(seriesIndex)]);
              point[0] += barLayout[i - 1].offsetCenter;
              point[1] -= 20;
              points.push(point);
          }
      }
      var style = api.style({
          stroke: api.visual('color'),
          fill: null
      });
  
      return {
          type: 'polyline',
          shape: {
              points: points
          },
          style: style
      };
  }
  
  option = {
      tooltip: {
          trigger: 'axis'
      },
      legend: {
          data: legendData
      },
      dataZoom: [{
          type: 'slider',
          start: 50,
          end: 70
      }, {
          type: 'inside',
          start: 50,
          end: 70
      }],
      xAxis: {
          data: xAxisData
      },
      yAxis: {},
      series: [{
          type: 'custom',
          name: 'trend',
          renderItem: renderItem,
          itemStyle: {
              normal: {
                  borderWidth: 2
              }
          },
          encode: {
              x: 0,
              y: encodeY
          },
          data: customData,
          z: 100
      }].concat(echarts.util.map(dataList, function (data, index) {
          return {
              type: 'bar',
              animation: false,
              name: legendData[index + 1],
              itemStyle: {
                  normal: {
                      opacity: 0.5
                  }
              },
              data: data
          };
      }))
  };;
  if (option && typeof option === "object") {
      myChart.setOption(option, true);
  }
</script>